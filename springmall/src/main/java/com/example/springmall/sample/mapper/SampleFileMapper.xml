<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.example.springmall.sample.mapper.SampleFileMapper">
	<!-- 샘플 파일테이블에 추가 -->
    <insert id="insertSampleFile" parameterType="com.example.springmall.sample.vo.SampleFile">

        INSERT INTO samplefile(
            sample_no,
            samplefile_path,
            samplefile_name,
            samplefile_extention,
            samplefile_file,
            samplefile_size,
            samplefile_date
        ) 
        VALUES(
            #{sampleNo},
            #{samplefilePath},
            #{samplefileName},
            #{samplefileExtention},
            #{samplefileFile},
            #{samplefileSize},
            now()
        )
    </insert>
    
    <!-- 샘플파일 삭제 -->
    <delete id="deleteSampleFile" parameterType="int">
    	DELETE FROM samplefile WHERE sample_no=#{sampleNo}
    </delete>
    
    <!-- 샘플파일 삭제 전 폴더 안 파일을 삭제하기 위해 파일 주소 로드 -->
    <select id="deleteFolderSampleFile" parameterType="int" resultType="com.example.springmall.sample.vo.SampleFile">
    	SELECT
    		sf.samplefile_path as samplefilePath
			,sf.samplefile_name as samplefileName
			,sf.samplefile_extention as samplefileExtention
		FROM samplefile as sf
		WHERE sample_no=#{sampleNo}
    </select>
    
</mapper>